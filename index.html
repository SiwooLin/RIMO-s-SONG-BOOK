<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>RIMO's SONG BOOK</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Jua&display=swap');
    body {
      background: #1f1f1f;
      color: #f0f0f0;
      font-family: 'Jua', sans-serif;
      text-align: center;
      margin: 30px auto;
      max-width: 900px;
    }
    h1 {
      color: #ff4c00;
      font-size: 4.6rem;
      margin-bottom: 20px;
      cursor: pointer;
      font-weight: bold;
    }
    .important-notice {
      background: #c8baff; /* 연한 보라 */
      color: #3f2e70;
      padding: 14px 20px;
      border-radius: 8px;
      font-weight: bold;
      margin: 30px auto 25px;
      max-width: 860px;
    }
    .search-box {
      max-width: 600px;
      margin: 0 auto 50px;
    }
    #search {
      width: 100%;
      padding: 11px 20px;
      font-size: 16px;
      border: none;
      border-radius: 25px;
      text-align: center;
      font-family: 'Jua', sans-serif;
      outline: none;
    }
    #search::placeholder {
      text-align: center;
      color: #a798bb;
    }
    .btn-pill, .btn-circle {
      font-family: 'Jua', sans-serif;
      color: white;
      border: none;
      cursor: pointer;
      user-select: none;
      transition: filter 0.2s;
      height: 42px;
      line-height: 42px;
      font-size: 16px;
      box-sizing: border-box;
      margin: 5px 6px;
    }
    .btn-pill {
      padding: 0 28px;
      border-radius: 9999px;
      background-color: #ffaf5a; /* 연한 주황 */
      min-width: 80px;
    }
    .btn-pill:hover {
      filter: brightness(0.85);
    }
    .btn-circle {
      width: 42px;
      border-radius: 50%;
      background-color: #ff7a00; /* 주황 진한 */
      display: inline-flex;
      align-items: center;
      justify-content: center;
      margin: 5px 4px;
      font-weight: bold;
    }
    .btn-circle:hover {
      filter: brightness(0.85);
    }
    .btn-doc {
      background: #8c76e0; /* 노래책 설명서/가격표 배경 보라 */
      min-width: 110px;
      font-weight: bold;
    }
    .btn-genre {
      background: #ff7a00; /* Kpop 색 진한 주황 */
      font-weight: bold;
      min-width: 100px;
    }
    .button-row {
      margin-bottom: 20px;
      max-width: 860px;
      margin-left: auto;
      margin-right: auto;
      text-align: center;
    }
    .doc-section {
      background: #8c76e0;
      color: #f3ecff;
      padding: 20px 25px;
      border-radius: 12px;
      margin: 40px auto 50px;
      max-width: 860px;
      text-align: left;
      line-height: 1.7;
      font-weight: 600;
      font-size: 16px;
    }
    .section-title {
      font-size: 2rem;
      margin-bottom: 18px;
      color: #ff7a00;
      text-align: center;
      font-weight: 700;
    }
    table {
      width: 100%;
      border-collapse: separate;
      border-spacing: 0;
      margin-bottom: 50px;
      font-size: 16px;
      max-width: 860px;
      margin-left: auto;
      margin-right: auto;
    }
    thead tr {
      background: #ff7a00; /* 헤더 배경: Kpop 색상 주황 */
    }
    thead th {
      padding: 14px 8px;
      color: #fff;
      border-bottom: 3px solid #ff7a00;
      border-right: 2px dotted #ff7a00;
      text-align: center;
      font-weight: 700;
      font-size: 17px;
    }
    thead th:last-child {
      border-right: none;
    }
    tbody tr:nth-child(even) {
      background: #2b2b2b;
    }
    tbody tr:nth-child(odd) {
      background: #1f1f1f;
    }
    tbody td {
      padding: 12px 10px;
      text-align: center;
      border-right: 2px dotted #ff7a00;
      font-weight: 600;
    }
    tbody td:last-child {
      border-right: none;
    }
    #searchResultsMessage {
      color: #c8baff; /* 연한 보라 */
      font-weight: 700;
      font-size: 18px;
      margin: 10px auto 40px;
      min-height: 1.5em;
      max-width: 860px;
    }
    #songsTableContainer {
      margin-bottom: 40px;
    }
  </style>
</head>
<body>

<h1 onclick="resetToDefault()" title="홈으로 이동">RIMO's SONG BOOK 🎵</h1>

<div class="important-notice">
  📌 노래책 설명서와 가격표를 먼저 확인하고 이용해주세요!
</div>

<div class="search-box">
  <input id="search" placeholder="노래 제목, 가수명 등 검색" oninput="searchSongs()" autocomplete="off" spellcheck="false" />
</div>

<div class="button-row">
  <button class="btn-pill btn-doc" onclick="showDoc('노래책 설명서')">노래책 설명서</button>
  <button class="btn-pill btn-doc" onclick="showDoc('가격표')">가격표</button>
</div>

<div class="button-row">
  <button class="btn-pill btn-genre" onclick="selectGenre('Kpop')">K-pop</button>
  <button class="btn-pill btn-genre" onclick="selectGenre('Kpop아이돌')">K-pop 아이돌</button>
  <button class="btn-pill btn-genre" onclick="selectGenre('Pop')">Pop</button>
</div>

<div id="buttonsContainer"></div>

<div id="노래책 설명서" class="doc-section">
  <div class="section-title">노래책 설명서</div>
  <ul>
    <li>•노래 신청을 할 땐 꼭!! 가수와 곡 제목을 함께 적어서 신청해주세요. (코드도 적어주시면 감사합니다!)</li>
    <li>•컨디션에 따라 부르기 어렵다고 판단될 경우 신청곡을 거절할 수도 있습니다.<br>(거절된 신청은 기본 노래 2곡으로 대체 가능합니다.)</li>
    <li>•설명을 읽지 않고 신청할 경우 책임은 신청자에게 있습니다.</li>
    <li>•추천 곡은 디스코드 노래 추천방에 적어주세요.</li>
    <li>❌과도한 평가와 훈수는 자제해주세요❌</li>
  </ul>
</div>

<div id="가격표" class="doc-section" style="display:none;">
  <div class="section-title">가격표</div>
  <ul>
    <li>•기본 노래 신청은 2000 치즈 혹은 투네이션으로 신청 가능합니다.</li>
    <li>•어려운 노래 신청은 5000 치즈 혹은 투네이션으로 신청 가능합니다.</li>
    <li>•유료곡 노래 신청은 10000 치즈 이상 혹은 투네이션으로 신청 가능합니다.</li>
    <li>•개인 소장 노래 녹음본 (믹싱 유무 선택 가능)은 200,000 치즈 혹은 투네이션으로 신청 가능합니다.</li>
  </ul>
</div>

<div id="searchResultsMessage"></div>
<div id="songsTableContainer"></div>

<script>
  const korInitials = ['ㄱ','ㄴ','ㄷ','ㄹ','ㅁ','ㅂ','ㅅ','ㅇ','ㅈ','ㅊ','ㅋ','ㅌ','ㅍ','ㅎ'];
  const engInitials = 'abcdefghijklmnopqrstuvwxyz'.split('');
  const songs = [
    {category:'Kpop 전체', title:'Dynamite', singer:'BTS', code:'C', difficulty:'중', skill:'고'},
    {category:'Kpop ㄱ', title:'Gangnam Style', singer:'PSY', code:'Am', difficulty:'쉬움', skill:'중'},
    {category:'Kpop ㄴ', title:'Nobody', singer:'Wonder Girls', code:'G', difficulty:'쉬움', skill:'중'},
    {category:'Kpop아이돌 전체', title:'Ice Cream', singer:'BLACKPINK', code:'F', difficulty:'중', skill:'중'},
    {category:'Pop 전체', title:'Shape of You', singer:'Ed Sheeran', code:'Dm', difficulty:'중', skill:'고'},
    {category:'Pop a', title:'All of Me', singer:'John Legend', code:'Em', difficulty:'중', skill:'중'}
  ];

  let currentGenre = '';
  let currentFilter = '';

  function resetToDefault(){
    showDoc('노래책 설명서');
    document.getElementById('buttonsContainer').innerHTML = '';
    document.getElementById('songsTableContainer').innerHTML = '';
    document.getElementById('searchResultsMessage').textContent = '';
    document.getElementById('search').value = '';
    currentGenre = '';
    currentFilter = '';
  }

  function showDoc(which){
    document.getElementById('노래책 설명서').style.display = which==='노래책 설명서' ? 'block' : 'none';
    document.getElementById('가격표').style.display = which==='가격표' ? 'block' : 'none';
    document.getElementById('songsTableContainer').innerHTML = '';
    document.getElementById('searchResultsMessage').textContent = '';
    document.getElementById('buttonsContainer').innerHTML = '';
  }

  function selectGenre(genre){
    currentGenre = genre;
    currentFilter = genre + ' 전체';
    showDoc('');
    drawButtons();
    drawTable(songs.filter(s => s.category.startsWith(genre)));
  }

  function drawButtons(){
    const cont = document.getElementById('buttonsContainer');
    cont.innerHTML = '';

    if (!currentGenre) return;

    const allBtn = document.createElement('button');
    allBtn.className = 'btn-circle btn-filter';
    allBtn.textContent = '전체';
    allBtn.title = '전체 곡 보기';
    allBtn.onclick = () => {
      currentFilter = currentGenre + ' 전체';
      drawTable(songs.filter(s => s.category.startsWith(currentGenre)));
    };
    cont.appendChild(allBtn);

    const initials = currentGenre === 'Pop' ? engInitials : korInitials;
    initials.forEach(ch => {
      const b = document.createElement('button');
      b.className = 'btn-circle btn-filter';
      b.textContent = ch;
      b.title = `${ch}로 시작하는 곡 보기`;
      b.onclick = () => {
        currentFilter = `${currentGenre} ${ch}`;
        drawTable(songs.filter(s => s.category === currentFilter));
      };
      cont.appendChild(b);
    });
  }

  function drawTable(list){
    const cont = document.getElementById('songsTableContainer');
    cont.innerHTML = '';
    document.getElementById('searchResultsMessage').textContent = '';
    if(list.length === 0){
      document.getElementById('searchResultsMessage').textContent = '검색 결과가 없습니다.';
      return;
    }
    const table = document.createElement('table');
    const thead = document.createElement('thead');
    const trHead = document.createElement('tr');

    // '가수'가 제목보다 앞에 위치하도록 배열 수정
    ['가수', '제목', '코드', '난이도', '숙련도'].forEach(h => {
      const th = document.createElement('th');
      th.textContent = h;
      trHead.appendChild(th);
    });
    thead.appendChild(trHead);
    table.appendChild(thead);

    const tbody = document.createElement('tbody');
    list.forEach(({singer, title, code, difficulty, skill}) => {
      const tr = document.createElement('tr');
      [singer, title, code, difficulty, skill].forEach(text => {
        const td = document.createElement('td');
        td.textContent = text;
        tr.appendChild(td);
      });
      tbody.appendChild(tr);
    });
    table.appendChild(tbody);
    cont.appendChild(table);
  }

  function searchSongs(){
    const val = document.getElementById('search').value.trim().toLowerCase();
    showDoc('');
    if(val===''){
      document.getElementById('searchResultsMessage').textContent = '';
      document.getElementById('songsTableContainer').innerHTML = '';
      document.getElementById('buttonsContainer').innerHTML = '';
      return;
    }
    // 검색은 장르 구분 없이 전체 곡 대상으로 진행
    const filtered = songs.filter(s => {
      return s.title.toLowerCase().includes(val) || s.singer.toLowerCase().includes(val);
    });
    currentGenre = '';
    currentFilter = '';
    document.getElementById('buttonsContainer').innerHTML = '';
    drawTable(filtered);
  }

  window.onload = () => {
    resetToDefault();
  };
</script>

</body>
</html>
