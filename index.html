<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>RIMO's SONG BOOK</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Jua&display=swap');
    body {
      background: #1f1f1f;
      color: #f0f0f0;
      font-family: 'Jua', sans-serif;
      text-align: center;
      margin: 30px auto;
      max-width: 900px;
    }
    h1 {
      color: #ff4c00;
      font-size: 4.6rem;
      margin-bottom: 20px;
      cursor: pointer;
      font-weight: bold;
    }
    .important-notice {
      background: #c8baff; /* 연한 보라 */
      color: #3f2e70;
      padding: 14px 20px;
      border-radius: 8px;
      font-weight: bold;
      margin: 30px auto 25px;
      max-width: 860px;
    }
    .search-box {
      max-width: 600px;
      margin: 0 auto 50px;
    }
    #search {
      width: 100%;
      padding: 11px 20px;
      font-size: 16px;
      border: none;
      border-radius: 25px;
      text-align: center;
      font-family: 'Jua', sans-serif;
      outline: none;
    }
    #search::placeholder {
      text-align: center;
      color: #a798bb;
    }
    .btn-pill, .btn-circle {
      font-family: 'Jua', sans-serif;
      color: white;
      border: none;
      cursor: pointer;
      user-select: none;
      transition: filter 0.2s;
      height: 42px;
      line-height: 42px;
      font-size: 16px;
      box-sizing: border-box;
      margin: 5px 6px;
    }
    .btn-pill {
      padding: 0 28px;
      border-radius: 9999px;
      background-color: #ffaf5a; /* 연한 주황 */
      min-width: 80px;
    }
    .btn-pill:hover {
      filter: brightness(0.85);
    }
    .btn-circle {
      width: 42px;
      border-radius: 50%;
      background-color: #ff7a00; /* 주황 진한 */
      display: inline-flex;
      align-items: center;
      justify-content: center;
      margin: 5px 4px;
      font-weight: bold;
    }
    .btn-circle:hover {
      filter: brightness(0.85);
    }
    .btn-doc {
      background: #8c76e0; /* 노래책 설명서/가격표 배경 보라 */
      min-width: 110px;
      font-weight: bold;
    }
    .btn-genre {
      background: #ff7a00; /* Kpop 색 진한 주황 */
      font-weight: bold;
      min-width: 100px;
    }
    .button-row {
      margin-bottom: 20px;
      max-width: 860px;
      margin-left: auto;
      margin-right: auto;
      text-align: center;
    }
    .doc-section {
      background: #8c76e0;
      color: #f3ecff;
      padding: 20px 25px;
      border-radius: 12px;
      margin: 40px auto 50px;
      max-width: 860px;
      text-align: left;
      line-height: 1.7;
      font-weight: 600;
      font-size: 16px;
    }
    .section-title {
      font-size: 2rem;
      margin-bottom: 18px;
      color: #ff7a00;
      text-align: center;
      font-weight: 700;
    }
    table {
      width: 100%;
      border-collapse: separate;
      border-spacing: 0;
      margin-bottom: 50px;
      font-size: 16px;
      max-width: 860px;
      margin-left: auto;
      margin-right: auto;
    }
    thead tr {
      background: #ff7a00; /* 헤더 배경: Kpop 색상 주황 */
    }
    thead th {
      padding: 14px 8px;
      color: #fff;
      border-bottom: 3px solid #ff7a00;
      border-right: 2px dotted #ff7a00;
      text-align: center;
      font-weight: 700;
      font-size: 17px;
    }
    thead th:last-child {
      border-right: none;
    }
    tbody tr:nth-child(even) {
      background: #2b2b2b;
    }
    tbody tr:nth-child(odd) {
      background: #1f1f1f;
    }
    tbody td {
      padding: 12px 10px;
      text-align: center;
      border-right: 2px dotted #ff7a00;
      font-weight: 600;
    }
    tbody td:last-child {
      border-right: none;
    }
    #searchResultsMessage {
      color: #c8baff; /* 연한 보라 */
      font-weight: 700;
      font-size: 18px;
      margin: 10px auto 40px;
      min-height: 1.5em;
      max-width: 860px;
    }
    #songsTableContainer {
      margin-bottom: 40px;
    }
  </style>
</head>
<body>

<h1 onclick="resetToDefault()" title="홈으로 이동">RIMO's SONG BOOK 🎵</h1>

<div class="important-notice">
  📌 노래책 설명서와 가격표를 먼저 확인하고 이용해주세요!
</div>

<div class="search-box">
  <input id="search" placeholder="노래 제목, 가수명 등 검색" oninput="searchSongs()" autocomplete="off" spellcheck="false" />
</div>

<div class="button-row">
  <button class="btn-pill btn-doc" onclick="showDoc('노래책 설명서')">노래책 설명서</button>
  <button class="btn-pill btn-doc" onclick="showDoc('가격표')">가격표</button>
</div>

<div class="button-row">
  <button class="btn-pill btn-genre" onclick="selectGenre('Kpop')">K-pop</button>
  <button class="btn-pill btn-genre" onclick="selectGenre('Kpop아이돌')">K-pop 아이돌</button>
  <button class="btn-pill btn-genre" onclick="selectGenre('Pop')">Pop</button>
</div>

<div id="buttonsContainer"></div>

<div id="노래책 설명서" class="doc-section">
  <div class="section-title">노래책 설명서</div>
  <ul>
    <li>•노래 신청을 할 땐 꼭!! 가수와 곡 제목을 함께 적어서 신청해주세요. (코드도 적어주시면 감사합니다!)</li>
    <li>•컨디션에 따라 부르기 어렵다고 판단될 경우 신청곡을 거절할 수도 있습니다.<br>(거절된 신청은 기본 노래 2곡으로 대체 가능합니다.)</li>
    <li>•설명을 읽지 않고 신청할 경우 책임은 신청자에게 있습니다.</li>
    <li>•추천 곡은 디스코드 노래 추천방에 적어주세요.</li>
    <li>❌과도한 평가와 훈수는 자제해주세요❌</li>
  </ul>
</div>

<div id="가격표" class="doc-section" style="display:none;">
  <div class="section-title">가격표</div>
  <ul>
    <li>•기본 노래 신청은 2000 치즈 혹은 투네이션으로 신청 가능합니다.</li>
    <li>•어려운 노래 신청은 5000 치즈 혹은 투네이션으로 신청 가능합니다.</li>
    <li>•유료곡 노래 신청은 10000 치즈 이상 혹은 투네이션으로 신청 가능합니다.</li>
    <li>•개인 소장 노래 녹음본 (믹싱 유무 선택 가능)은 200,000 치즈 혹은 투네이션으로 신청 가능합니다.</li>
  </ul>
</div>

<div id="searchResultsMessage"></div>
<div id="songsTableContainer"></div>

<script>
  const korInitials = ['ㄱ','ㄴ','ㄷ','ㄹ','ㅁ','ㅂ','ㅅ','ㅇ','ㅈ','ㅊ','ㅋ','ㅌ','ㅍ','ㅎ'];
  const engInitials = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'.split('');

  // 가수 이름에서 첫 글자 초성 추출 함수 (한글/영어 모두 처리)
  function getInitial(name) {
    if (!name || name.length === 0) return '';
    const firstChar = name.trim()[0].toUpperCase();
    // 한글 초성 구하기
    const code = firstChar.charCodeAt(0);
    if (code >= 0xAC00 && code <= 0xD7A3) {
      const baseCode = code - 0xAC00;
      const cho = Math.floor(baseCode / 588);
      return ['ㄱ','ㄲ','ㄴ','ㄷ','ㄸ','ㄹ','ㅁ','ㅂ','ㅃ','ㅅ','ㅆ','ㅇ','ㅈ','ㅉ','ㅊ','ㅋ','ㅌ','ㅍ','ㅎ'][cho];
    }
    // 영어라면 그냥 첫글자 대문자로
    if (firstChar >= 'A' && firstChar <= 'Z') return firstChar;
    // 그 외는 빈문자열
    return '';
  }

  const songsRaw = [
    // Kpop아이돌
    {singer:'(여자)아이들(G)I-DLE', title:'화', code:'F#m', difficulty:'', skill:''},
    {singer:'(여자)아이들(G)I-DLE', title:'덤디덤디', code:'E', difficulty:'', skill:''},
    {singer:'(여자)아이들(G)I-DLE', title:'한(-)', code:'A', difficulty:'', skill:''},
    {singer:'(여자)아이들(G)I-DLE', title:'LATATA', code:'Am', difficulty:'', skill:''},
    {singer:'(여자)아이들(G)I-DLE', title:'Lion', code:'Em', difficulty:'', skill:''},
    {singer:'(여자)아이들(G)I-DLE', title:'Oh My God', code:'Em', difficulty:'', skill:''},
    {singer:'(여자)아이들(G)I-DLE', title:'Senorita', code:'Em', difficulty:'', skill:''},
    {singer:'(여자)아이들(G)I-DLE', title:'TOMBOY', code:'G#m', difficulty:'', skill:''},
    {singer:'(여자)아이들(G)I-DLE', title:'Nxde', code:'Am', difficulty:'', skill:''},
    {singer:'(여자)아이들(G)I-DLE', title:'퀸카(Queencard)', code:'Em', difficulty:'', skill:''},
    {singer:'(여자)아이들(G)I-DLE', title:'나는 아픈 건 딱 질색이니까', code:'C', difficulty:'', skill:''},
    {singer:'(여자)아이들(G)I-DLE', title:'Uh-Oh', code:'Em', difficulty:'', skill:''},
    {singer:'(여자)아이들(G)I-DLE', title:'Super Lady', code:'', difficulty:'', skill:''},

    {singer:'AB6IX', title:'Blind For Love', code:'Em', difficulty:'', skill:''},
    {singer:'AB6IX', title:'별의 조각들', code:'Em', difficulty:'', skill:''},

    {singer:'ASTRO', title:'Crazy Sexy Cool', code:'', difficulty:'', skill:''},
    {singer:'ASTRO', title:'FEELING', code:'', difficulty:'', skill:''},
    {singer:'ASTRO', title:'GOOD DAY', code:'', difficulty:'', skill:''},
    {singer:'ASTRO', title:'GONE', code:'', difficulty:'', skill:''},
    {singer:'ASTRO', title:'Ghost in my house', code:'', difficulty:'', skill:''},
    {singer:'ASTRO', title:'Grow Up', code:'', difficulty:'', skill:''},
    {singer:'ASTRO', title:'Knock', code:'', difficulty:'', skill:''},
    {singer:'ASTRO', title:'ONE', code:'', difficulty:'', skill:''},

    {singer:'BTS', title:'Permission To Dance', code:'', difficulty:'', skill:''},
    {singer:'BTS', title:'Dynamite', code:'', difficulty:'', skill:''},
    {singer:'BTS', title:'Butter', code:'', difficulty:'', skill:''},
    {singer:'BTS', title:'Boy With Luv', code:'', difficulty:'', skill:''},
    {singer:'BTS', title:'Fake Love', code:'', difficulty:'', skill:''},
    {singer:'BTS', title:'Run', code:'', difficulty:'', skill:''},
    {singer:'BTS', title:'Spring Day', code:'', difficulty:'', skill:''},
    {singer:'BTS', title:'Life Goes On', code:'', difficulty:'', skill:''},

    {singer:'BLACKPINK', title:'Lovesick Girls', code:'', difficulty:'', skill:''},
    {singer:'BLACKPINK', title:'How You Like That', code:'', difficulty:'', skill:''},
    {singer:'BLACKPINK', title:'Kill This Love', code:'', difficulty:'', skill:''},
    {singer:'BLACKPINK', title:'Pretty Savage', code:'', difficulty:'', skill:''},

    // Kpop
    {singer:'강다니엘', title:'2U', code:'', difficulty:'', skill:''},
    {singer:'강다니엘', title:'Paradise', code:'', difficulty:'', skill:''},
    {singer:'강다니엘', title:'TOUCHIN`', code:'', difficulty:'', skill:''},

    {singer:'경서예지', title:'차가워진 이 바람엔 우리가 써있어', code:'', difficulty:'', skill:''},

    {singer:'기리보이', title:'보통날', code:'', difficulty:'', skill:''},

    {singer:'노을', title:'기억할게', code:'', difficulty:'', skill:''},

    {singer:'다비치', title:'너에게 못했던 내 마지막 말은', code:'', difficulty:'', skill:''},
    {singer:'다비치', title:'나의 오랜 연인에게', code:'', difficulty:'', skill:''},

    {singer:'라붐', title:'비밀이야', code:'', difficulty:'', skill:''},
    {singer:'라붐', title:'안녕', code:'', difficulty:'', skill:''},

    {singer:'선미', title:'보라빛 밤', code:'', difficulty:'', skill:''},
    {singer:'선미', title:'24시간이 모자라', code:'', difficulty:'', skill:''},

    {singer:'아이유', title:'좋은 날', code:'', difficulty:'', skill:''},
    {singer:'아이유', title:'밤편지', code:'', difficulty:'', skill:''},
    {singer:'아이유', title:'Blueming', code:'', difficulty:'', skill:''},
    {singer:'아이유', title:'Love Poem', code:'', difficulty:'', skill:''},

    {singer:'오마이걸', title:'Dun Dun Dance', code:'', difficulty:'', skill:''},
    {singer:'오마이걸', title:'살짝 설렜어', code:'', difficulty:'', skill:''},

    {singer:'자이언티', title:'꺼내 먹어요', code:'', difficulty:'', skill:''},

    {singer:'청하', title:'벌써 12시', code:'', difficulty:'', skill:''},

    {singer:'케이시', title:'그때가 좋았어', code:'', difficulty:'', skill:''},

    {singer:'헤이즈', title:'비도 오고 그래서', code:'', difficulty:'', skill:''},

    // Pop
    {singer:'Anne Marie', title:'2002', code:'C#m', difficulty:'', skill:''},
    {singer:'Anne Marie', title:'Birthday', code:'B', difficulty:'', skill:''},
    {singer:'Anne Marie', title:'FRIENDS', code:'Am', difficulty:'', skill:''},
    {singer:'Anne Marie', title:'Ciao adios', code:'G', difficulty:'', skill:''},

    {singer:'Adele', title:'Hello', code:'', difficulty:'', skill:''},
    {singer:'Adele', title:'Some one like you', code:'', difficulty:'', skill:''},
    {singer:'Adele', title:'My Same', code:'Em', difficulty:'', skill:'1절'},
    {singer:'Adele', title:'Rolling in the Deep', code:'', difficulty:'', skill:'잘 모름'},

    {singer:'Abir', title:'Tango', code:'', difficulty:'', skill:'1절'},
    {singer:'Alessia Cara', title:'Scars to Your Beautiful', code:'', difficulty:'', skill:''},
    {singer:'Ariana Grande', title:'Almost Is Never Enough(ft. Nathan Sykes)', code:'', difficulty:'', skill:'여자 파트만'},
    {singer:'Ariana Grande', title:'Santa tell me', code:'', difficulty:'', skill:''},

    {singer:'Alan Walker', title:'The Drum', code:'F#', difficulty:'', skill:''},

    {singer:'Billie Eilish', title:'bad guy', code:'Cm', difficulty:'', skill:''},
    {singer:'Billie Eilish', title:'Copycat', code:'', difficulty:'', skill:''},

    {singer:'Bruno Mars', title:'24K Magic', code:'', difficulty:'', skill:''},
    {singer:'Bruno Mars', title:'Just The Way You Are', code:'', difficulty:'', skill:''},
    {singer:'Bruno Mars', title:'Treasure', code:'', difficulty:'', skill:''},

    {singer:'Calvin Harris', title:'Summer', code:'', difficulty:'', skill:''},

    {singer:'Charlie Puth', title:'Attention', code:'Cm', difficulty:'', skill:''},

    {singer:'Ed Sheeran', title:'Shape Of You', code:'', difficulty:'', skill:''},
    {singer:'Ed Sheeran', title:'Perfect', code:'', difficulty:'', skill:''},

    {singer:'Justin Bieber', title:'Baby', code:'', difficulty:'', skill:''},
    {singer:'Justin Bieber', title:'Sorry', code:'', difficulty:'', skill:''},

    {singer:'Taylor Swift', title:'Love Story', code:'', difficulty:'', skill:''},
    {singer:'Taylor Swift', title:'You Belong With Me', code:'', difficulty:'', skill:''},
  ];

  // songs 배열에 category 추가 (초성/알파벳 기준)
  const songs = songsRaw.map(({singer, title, code, difficulty, skill}) => {
    let initial = getInitial(singer);
    // 카테고리 분기: Kpop아이돌 / Kpop / Pop
    // 임시로 Kpop아이돌은 가수가 영어 대문자로 되어있으면 "Kpop아이돌", 아니면 Kpop
    // 여기선 원래 user가 보낸 걸 그대로 유지. 즉 Kpop아이돌은 원래 Kpop아이돌에만 들어감
    // 따라서 원본 데이터를 보고 Kpop아이돌 가수인지 아닌지 구분 가능하나, 단순히 'Kpop아이돌'이란 카테고리에 넣는걸 유지.

    // user님 데이터에서 Kpop아이돌 가수 리스트 예: (여자)아이들, BTS, BLACKPINK, AB6IX, ASTRO, etc
    // 간단히 영어 가수명 대문자 포함하면 Kpop아이돌, 한글 이름은 Kpop으로 분류

    let category = '';
    if (['(여자)아이들(G)I-DLE', 'AB6IX', 'ASTRO', 'BTS', 'BLACKPINK'].includes(singer)) {
      category = 'Kpop아이돌 ' + initial;
    } else if (singer.match(/^[A-Za-z]/)) {
      category = 'Pop ' + initial;
    } else {
      category = 'Kpop ' + initial;
    }

    return {category, singer, title, code, difficulty, skill};
  });

  let currentCategory = null;
  let currentInitial = null;

  // 카테고리별 초성(한글) or 알파벳 리스트
  const initialsMap = {
    'Kpop': korInitials,
    'Kpop아이돌': korInitials,
    'Pop': engInitials
  };

  function showDoc(section) {
    document.getElementById('노래책 설명서').style.display = 'none';
    document.getElementById('가격표').style.display = 'none';
    if (section) {
      document.getElementById(section).style.display = 'block';
    }
    clearButtons();
    clearTable();
  }

  function clearButtons() {
    document.getElementById('buttonsContainer').innerHTML = '';
  }

  function clearTable() {
    document.getElementById('songsTableContainer').innerHTML = '';
    document.getElementById('searchResultsMessage').textContent = '';
  }

  function resetToDefault() {
    document.getElementById('search').value = '';
    showDoc('노래책 설명서');
    currentCategory = null;
    currentInitial = null;
    clearButtons();
    clearTable();
  }

  function selectGenre(genre) {
    currentCategory = genre;
    currentInitial = null;
    document.getElementById('search').value = '';
    showDoc(null);

    // 버튼 생성
    const container = document.getElementById('buttonsContainer');
    container.innerHTML = '';
    const initials = initialsMap[genre] || [];
    initials.forEach(initial => {
      const btn = document.createElement('button');
      btn.textContent = initial;
      btn.className = 'btn-circle';
      btn.onclick = () => selectInitial(initial);
      container.appendChild(btn);
    });

    clearTable();
  }

  function selectInitial(initial) {
    currentInitial = initial;
    document.getElementById('search').value = '';
    showDoc(null);
    renderSongsTable();
  }

  function renderSongsTable() {
    clearTable();
    const container = document.getElementById('songsTableContainer');
    if (!currentCategory || !currentInitial) {
      container.innerHTML = '';
      return;
    }
    // 선택한 카테고리와 초성/알파벳으로 필터
    const filteredSongs = songs.filter(song => {
      if (!song.category) return false;
      // category가 'Kpop ㄱ' 같은 형태임
      return song.category.startsWith(currentCategory) && song.category.endsWith(currentInitial);
    });
    if (filteredSongs.length === 0) {
      document.getElementById('searchResultsMessage').textContent = `검색 결과가 없습니다: ${currentCategory} ${currentInitial}`;
      container.innerHTML = '';
      return;
    }
    document.getElementById('searchResultsMessage').textContent = '';

    // 테이블 생성
    const table = document.createElement('table');
    const thead = document.createElement('thead');
    const thr = document.createElement('tr');
    ['제목', '가수', '키', '난이도', '숙련도'].forEach(txt => {
      const th = document.createElement('th');
      th.textContent = txt;
      thr.appendChild(th);
    });
    thead.appendChild(thr);
    table.appendChild(thead);

    const tbody = document.createElement('tbody');
    filteredSongs.forEach(({title, singer, code, difficulty, skill}) => {
      const tr = document.createElement('tr');
      [title, singer, code, difficulty, skill].forEach(val => {
        const td = document.createElement('td');
        td.textContent = val || '';
        tr.appendChild(td);
      });
      tbody.appendChild(tr);
    });
    table.appendChild(tbody);
    container.appendChild(table);
  }

  function searchSongs() {
    clearTable();
    showDoc(null);
    const query = document.getElementById('search').value.trim().toLowerCase();
    if (query.length === 0) {
      document.getElementById('searchResultsMessage').textContent = '';
      return;
    }
    const container = document.getElementById('songsTableContainer');
    const results = songs.filter(({title, singer}) => {
      return title.toLowerCase().includes(query) || singer.toLowerCase().includes(query);
    });
    if (results.length === 0) {
      document.getElementById('searchResultsMessage').textContent = '검색 결과가 없습니다.';
      return;
    }
    document.getElementById('searchResultsMessage').textContent = '';

    const table = document.createElement('table');
    const thead = document.createElement('thead');
    const thr = document.createElement('tr');
    ['제목', '가수', '키', '난이도', '숙련도'].forEach(txt => {
      const th = document.createElement('th');
      th.textContent = txt;
      thr.appendChild(th);
    });
    thead.appendChild(thr);
    table.appendChild(thead);

    const tbody = document.createElement('tbody');
    results.forEach(({title, singer, code, difficulty, skill}) => {
      const tr = document.createElement('tr');
      [title, singer, code, difficulty, skill].forEach(val => {
        const td = document.createElement('td');
        td.textContent = val || '';
        tr.appendChild(td);
      });
      tbody.appendChild(tr);
    });
    table.appendChild(tbody);
    container.appendChild(table);
  }

  resetToDefault();
</script>

</body>
</html>
