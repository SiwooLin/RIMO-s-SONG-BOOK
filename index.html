<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>RIMO's SONG BOOK 🎵</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Jua&display=swap');
  body {
    background: #1f1f1f;
    color: #f0f0f0;
    font-family: 'Jua', sans-serif;
    max-width: 900px;
    margin: 20px auto;
    text-align: center;
  }
  h1 {
    color: #ff5400;
    font-size: 3.6rem;
    margin-bottom: 10px;
    cursor: pointer;
  }
  .important-notice {
    background: #c9b8f9;
    color: #1f1f1f;
    padding: 10px;
    border-radius: 6px;
    font-weight: bold;
    margin-bottom: 15px;
  }
  #searchInput {
    width: 90%;
    max-width: 420px;
    padding: 10px 20px;
    font-size: 1.1rem;
    border: 2px solid #ff5400;
    border-radius: 20px;
    background: #333;
    color: #f0f0f0;
    margin: 10px auto 20px;
    text-align: center;
    box-sizing: border-box;
    display: block;
    font-family: 'Jua', sans-serif;
  }
  #searchInput:focus {
    border-color: #cc4a00; outline: none;
  }
  button {
    border-radius: 20px;
    padding: 0 16px;
    font-weight: bold;
    cursor: pointer;
    transition: background 0.3s;
    border: none;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    text-align: center;
    box-sizing: border-box;
    height: 36px;
    min-width: 100px;
    font-size: 1rem;
    margin: 5px 5px 10px;
    user-select: none;
    font-family: 'Jua', sans-serif;
  }
  .top-categories button {
    background: #a26bdf;
    color: white;
  }
  .top-categories button:hover {
    background: #8b55c1;
  }
  .genre-categories button {
    background: #e67e22;
    color: #1f1f1f;
  }
  .genre-categories button:hover {
    background: #cc6f1a;
  }
  #textContent {
    white-space: pre-wrap;
    background: #2c2c3a;
    border-radius: 8px;
    padding: 15px;
    margin: 0 auto 30px;
    color: #f0f0f0;
    font-size: 1.12rem;
    text-align: left;
    max-width: 900px;
    font-family: 'Jua', sans-serif;
    min-height: 150px;
  }
  table {
    width: 100%;
    border-collapse: collapse;
    margin-bottom: 30px;
    text-align: center;
    font-size: 1.05rem;
    letter-spacing: 0.5px;
    font-family: 'Jua', sans-serif;
  }
  thead th {
    background: #e67e22;
    color: #1f1f1f;
    padding: 10px;
    border: 1px solid #444;
  }
  tbody td {
    padding: 8px;
    border-top: 1px dashed #666;
  }
  tbody tr:nth-child(even) {
    background: #2b2b2b;
  }
  tbody tr:nth-child(odd) {
    background: #333;
  }
  .no-result {
    font-weight: bold;
    color: #ff5400;
    margin-top: 20px;
    display: none;
    font-family: 'Jua', sans-serif;
  }
</style>
</head>
<body>

<h1 onclick="filterCategory('노래책 설명서')">RIMO's SONG BOOK 🎵</h1>

<div class="important-notice" id="importantNotice">
  📌 필독 공지: 노래책 설명서와 가격표를 먼저 확인하고 이용해주세요!
</div>

<input type="text" id="searchInput" placeholder="가수명, 제목 등으로 검색" oninput="handleSearch()" autocomplete="off">

<div id="textContent"></div>

<div class="top-categories">
  <button onclick="filterCategory('노래책 설명서')">노래책 설명서</button>
  <button onclick="filterCategory('가격표')">가격표</button>
</div>

<div class="genre-categories">
  <button onclick="filterCategory('K-pop')">K-pop</button>
  <button onclick="filterCategory('K-pop 아이돌')">K-pop 아이돌</button>
  <button onclick="filterCategory('Pop')">Pop</button>
</div>

<table id="songTable" style="margin: 0 auto; max-width: 900px; display:none;">
  <thead>
    <tr><th>가수</th><th>제목</th><th>코드</th><th>난이도</th><th>숙련도</th></tr>
  </thead>
  <tbody id="tableBody"></tbody>
</table>

<div class="no-result" id="noResultMsg">
  검색 결과가 없습니다. 추천 곡은 디스코드 노래 추천방에 적어주세요.
</div>

<script>
  // 기본 데이터 예시, 실제 데이터에 맞게 수정하세요
  const data = {
    "노래책 설명서": {
      type: "text",
      content:
`• 노래 신청을 할 땐 꼭!! 가수와 곡 제목을 함께 적어서 신청해주세요. (코드도 적어주시면 감사합니다!)

• 컨디션에 따라 부르기 어렵다고 판단될 경우 신청곡을 거절할 수도 있습니다.  
(거절된 신청은 기본 노래 2곡으로 대체 가능합니다.)

• 설명을 읽지 않고 신청할 경우 책임은 신청자에게 있습니다.

• 추천 곡은 디스코드 노래 추천방에 적어주세요.

❌ 과도한 평가와 훈수는 자제해주세요 ❌`
    },
    "가격표": {
      type: "text",
      content:
`• 기본 노래 신청은 2000 치즈 혹은 투네이션으로 신청 가능합니다.

• 어려운 노래 신청은 5000 치즈 혹은 투네이션으로 신청 가능합니다.

• 유료곡 노래 신청은 10000 치즈 이상 혹은 투네이션으로 신청 가능합니다.

• 개인 소장 노래 녹음본 (믹싱 유무 선택 가능)은 200,000 치즈 혹은 투네이션으로 신청 가능합니다.`
    },
    "K-pop": {
      type: "table",
      songs: [
        {artist: "아이유", title: "좋은 날", code: "C", difficulty: "중", skill: "상"},
        {artist: "블랙핑크", title: "How You Like That", code: "Am", difficulty: "하", skill: "중"},
        {artist: "방탄소년단", title: "Dynamite", code: "F", difficulty: "중", skill: "상"},
      ]
    },
    "K-pop 아이돌": {
      type: "table",
      songs: [
        {artist: "트와이스", title: "Cheer Up", code: "G", difficulty: "중", skill: "상"},
        {artist: "엑소", title: "Love Shot", code: "Dm", difficulty: "하", skill: "중"},
        {artist: "세븐틴", title: "Very Nice", code: "Em", difficulty: "중", skill: "상"},
      ]
    },
    "Pop": {
      type: "table",
      songs: [
        {artist: "Ed Sheeran", title: "Shape of You", code: "C", difficulty: "중", skill: "상"},
        {artist: "Adele", title: "Hello", code: "Am", difficulty: "하", skill: "중"},
        {artist: "Bruno Mars", title: "Just the Way You Are", code: "F", difficulty: "중", skill: "상"},
      ]
    }
  };

  let currentCategory = "노래책 설명서";

  const textContentDiv = document.getElementById("textContent");
  const songTable = document.getElementById("songTable");
  const tableBody = document.getElementById("tableBody");
  const noResultMsg = document.getElementById("noResultMsg");
  const searchInput = document.getElementById("searchInput");

  // 카테고리 버튼 클릭 시 호출
  function filterCategory(category) {
    currentCategory = category;
    searchInput.value = "";
    noResultMsg.style.display = "none";
    updateDisplay();
  }

  // 검색창 입력 시 호출 (전체 테이블 데이터에서 검색)
  function handleSearch() {
    const query = searchInput.value.trim().toLowerCase();

    if (query.length === 0) {
      noResultMsg.style.display = "none";
      updateDisplay();
      return;
    }

    // 검색어 있을 때는 텍스트 내용 숨기고 테이블만 보이도록
    textContentDiv.style.display = "none";
    songTable.style.display = "table";

    let results = [];
    for (const cat in data) {
      if (data[cat].type === "table") {
        const filtered = data[cat].songs.filter(song => 
          song.artist.toLowerCase().includes(query) || song.title.toLowerCase().includes(query)
        );
        results = results.concat(filtered);
      }
    }
    renderTable(results);

    if(results.length === 0) {
      noResultMsg.style.display = "block";
      songTable.style.display = "none";
    } else {
      noResultMsg.style.display = "none";
      songTable.style.display = "table";
    }
  }

  // 표 출력 함수
  function renderTable(songs) {
    tableBody.innerHTML = "";
    songs.forEach(song => {
      const tr = document.createElement("tr");
      tr.innerHTML = `
        <td>${song.artist}</td>
        <td>${song.title}</td>
        <td>${song.code}</td>
        <td>${song.difficulty}</td>
        <td>${song.skill}</td>
      `;
      tableBody.appendChild(tr);
    });
  }

  // 현재 카테고리에 맞게 화면 업데이트
  function updateDisplay() {
    if(data[currentCategory].type === "text") {
      songTable.style.display = "none";
      textContentDiv.style.display = "block";
      textContentDiv.textContent = data[currentCategory].content;
      noResultMsg.style.display = "none";
    } else if(data[currentCategory].type === "table") {
      textContentDiv.style.display = "none";
      renderTable(data[currentCategory].songs);
      songTable.style.display = "table";
      noResultMsg.style.display = "none";
    }
  }

  // 초기 화면 로드 시 실행
  window.onload = () => {
    updateDisplay();
  };
</script>

</body>
</html>
